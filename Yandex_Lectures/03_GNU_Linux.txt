ОС GNU/Linux
Устройство и функционирование

	- *nix, BSD и GNU
	- загрузка
	- состав
	- дистрибутивы

GNU появился раньше всех перечисленных выше систем
	Minix
	▼
	386BSD
	▼
	Linux
	
Линус Торвальдс не знал о появлении 386BSD
comp.os.minix

Каким был загрузчик первой версии Linux?
	Загрузчика не было.
	Команда file определяет по содержимому файла, что это за файл.
	/boot/(бинарные файлы ядра Linux)
	
	hexdump -C -n[количество байт]	- вывод в каноническом виде в шестнадцатеричной системе содержимого.
	Ядро Linux загружало само себя.
	Ядро записывалось на дискету (с нулевого смещения),
	содержало встроенный в себя загрузчик
	и загружало само себя
	
	Торвальдса не устраивал эхмулятор терминала Minix, поэтому он написал свой.
	Ядро стало больше и уже не влезало на дискету (1,44 Мб), загрузку с дискеты убрали.
	
	Самые популярные загрузчики:
		• GRUB v1/v2
		• LILO
		• syslinux /
		•• pxeLinux (Preboot Execution Environment) - загрузка по сети /
		•• ISOLinux - загрузчик с компакт-диска/DVD
		• uBoot
	
[00:21:43]  Существенное отличие GRUB и LILO (в пользу GRUB)
	
	Конфигурация загрузчика:
		/boot/grub/grub.cfg
		/boot/grub/menu.lst
		/etc/lilo.conf
		syslinux.cfg
	
	Если мы совершили ошибку и забыли запустить команду lilo перед перезагрузкой,
	когда внесли изменения в конфигурационный файл lilo.conf, то ничего не произойдёт:
	загрузка будет происходить со старыми параметрами. (если при этом удалить старое ядро,
	то старые параметры будут использоваться для загрузки нового ядра. Могут возникнуть сложности).
	У GRUB первые 2 файла (оба названия конфигурационного файла) на командном языке загрузчика исполняется каждый раз при старте.
	Нет опасности внести изменения и забыть "сказать об этом" загрузчику.
	
	GUID/UUID уникальный идентификатор файловой системы (он не повторяется).
	Команда uuidgen - генератор UUID
	
	Распечатать) содержимое суперблока:
	$ sudo tune2fs -l /dev/sda
	или
	$ sudo tune2fs -l /dev/sda2
	Возможный вариант вывода команды:
	  Bad magic number in super-block while trying to open /dev/sda2
	  Couldn't find valid filesystem superblock.
	действует аналогично утилите file (смотрит в начало файла и пытается определить, что это за файл, по структуре и содержимому первых строк)
	
[00:31:36]  Ядро Linux
	
	Гибридное: драйверы дисковых и фаловых подсистем загружаются модулями.
	Модули можно подгружать, когда они нужны, и выгружать, когда уже не нужны.
	Модули - файлы в директории /lib/modules/
	
	Разработчики Linux НЕ РЕКОМЕНДУЮТ пересобирать ядро.
	
	Команда lsmod
	Можно поискать в её выводе наличие определённой ФС:
		$ lsmod |grep ext
	
	Файловая система ext включена в некоторых дистрибутивах в состав ядра.
	
[00:36:55]  Как происходит загрузка ядра? (Как работает bootstrapping?)
	Загрузчик загрузил в память ядро и передал ему управление.
	Термин bootstrapping появился ещё до создания компьютеров.
	Означает примерно "компьютер сам себя загрузил"
	Ядро одно, а компьютеры разные. Необходимо сконфигурировать ядро перед его загрузкой.
	
	Как настроить ядро до его запуска?
	Параметрами!
	С точки зрения настройки ядро не сильно отличается от программных утилит, запускаемых через командную строку.
	Ядро получает командную строку (и даже в Windows)
	
	Параметры:
		BOOT_IMAGE = (путь до архива ядра). Внесён загрузчиком.
		root=... - сообщает ядру, с какой файловой системой придётся иметь дело (указывает корневую файловую систему)
		root - очень важный параметр.
		# команда blkid
		crash_kernel - указывает место, куда помещается копия ядра. Дамп памяти ядра.
		quiet - не выводить информацию, кроме сообщений об ошибке
		splash - всплывающий графический экран при загрузке
	
	/var/log/dmesg - файл, содержащий сообщения, которые ядро должно выводить на консоль (но могло не выводить)
	
---[00:45:00]---