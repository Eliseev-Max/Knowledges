Файловая система Linux
(конспект статьи https://losst.ru/fajlovaya-sistema-linux)

Файловой системой называют
	• Все структура каталогов Linux, начиная с корня (/);
    • Конкретный формат раздела хранения данных, например, Ext3, Ext4, Btrfs, XFS и так далее.
		(Ядро Linux поддерживает более 100 типов файловых систем, в том числе очень старых и новых.)
		Каждый тип файловой системы использует свои структуры метаданных чтобы организовать работу с данными на диске;
    • Раздел или логический том, отформатированный в определенный тип файловой системы, который можно примонтировать
	к определенной точке монтирования.
	
Основные функции файловой системы
Основная функция файловой системы - предоставление организованного пространства для хранения файлов на энергонезависимом запоминающем устройстве.

Все файловые системы должны обеспечивать пространство имен.
Оно определяет:
				* как будут называться файлы,
				* ограничения на длину имени,
				* используемые символы, 
				* логическую структуру данных на диске (использование каталогов для организации файлов, а не просто складывания их в одном месте)
				
Пространство имён определено ► создать основу для пространства имён с помощью метаданных файловой системы

Состав метаданных файловой системы:
	структура данных для создания иерархии каталогов;
	структура для хранения занятых и свободных блоков на диске;
	структура с именами файлов и каталогов;
	информация о файлах, такая как:
									• размер,
									• время создания,
									• расположение файла на диске
										и так далее
	
	В самих блоках файла на диске хранится ТОЛЬКО ЕГО СОДЕРЖИМОЕ.
	Вся же остальная информация находится в метаданных.
	[ 	 Блок файла 	]	 [ 	 	   Метаданные 	    ]
	 |содержимое файла |	  |вся остальная информация|

Также метаданные используются: 
	* для описания логических томов и подразделов (если таковые поддерживаются);
	* метаданные содержат информацию, описывающую файловую систему

Для доступа к файлам также необходим набор функций API,
с помощью которых программы могли бы управлять различными объектами файловой системы:
	* методы создания файлов;
	* методы перемещения файлов;
	* методы удаления файлов

Современные файловые системы также обеспечивают модель безопасности,
которая представляет из себя схему прав доступа к файлам для пользователей.
Модель безопасности ФС в Linux гарантирует что пользователи будут иметь доступ только к своим файлам.

Организация файловой системы linux состоит из двух частей:
1. виртуальная файловая система. 
	Она представляет собой единый набор команд ядра, с помощью которого разработчики могут получить доступ к любой из файловых систем.
	Виртуальной файловой системе необходим драйвер для работы с различными типами ФС.
2. драйвера файловой системы.
	В них реализован стандартный набор команд, выполняющих специфичные для файловой системы действия.

Структура файловой системы Linux иерархическая.
Все каталоги находятся в корневом каталоге (/).

Корневая файловая система Linux - это ФС верхнего уровня.
Она должна содержать все файлы, необходимые для загрузки Linux еще до того как другие файловые системы будут смонтированы.
Здесь уже должны быть все исполняемые файлы и библиотеки, нужные для подключения других ФС.
Во время загрузки другие файловые системы монтируются в четко определенные для них каталоги.

Каталоги
		/bin
		/dev
		/etc
		/lib
		/root
		/sbin
			  • не могут быть примонтированы
			  • должны быть доступны еще до загрузки (в них находятся все необходимые файлы) 
			  
Каталоги 
		 /media 
		 /mnt 
			   должны быть пустыми, поскольку это точки монтирования для других файловых систем.

Остальные каталоги можно смело монтировать позже, они никак не повлияют на запуск.

Типы файловых систем

Основные файловые системы Linux:
    btrfs;
    cramfs;
    ext2;
    ext3;
    ext4;
    fat;
    gfs2;
    hfsplus;
    minix;
    msdos;
    ntfs;
    reiserfs;
    vfat;
    xfs.

Монтирование файловых систем
Точка монтирования - это обычный каталог, как любая другая часть файловой системы.
(Например, домашняя папка смонтирована в каталог /home)

Другие файловые системы (помимо корневой /) монтируются системой инициализации, например, SysVinit или Systemd.
Точки монтирования настраиваются с помощью файла /etc/fstab.
Также можно выполнять ручное монтирование в Linux с помощью команды mount.
Каталог для монтирования необязательно должен быть пустым, он может содержать файлы, но тогда они будут просто скрыты.
